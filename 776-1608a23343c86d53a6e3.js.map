{"version":3,"file":"776-1608a23343c86d53a6e3.js","mappings":"6JA6DA,UAxDa,SAACA,GACZ,IAAQC,EAAaD,EAAbC,GAAIC,EAASF,EAATE,KACZ,GAAkCC,EAAAA,EAAAA,MAA3BC,EAAP,KACMC,GADN,MACqBC,EAAAA,EAAAA,OAEfC,EAAWL,EAAI,QAAWD,EAAX,IAAiBC,EAAjB,QAAkCD,EACjDO,EAAaC,EAAAA,OAAa,MAuChC,OAFAA,EAAAA,WA9B4B,WAC1B,IAAMC,EAASF,EAAWG,QAEtBC,EAAMF,EAAOG,SACbH,EAAOI,gBAAiBF,EAAMF,EAAOI,gBAChCJ,EAAOK,gBAAeH,EAAMF,EAAOK,cAAcF,UAC1D,IAAMG,EAAYd,EAAI,QAAWD,EAAX,IAAiBC,EAAjB,QAAkCD,EAGlDgB,EAAU,wCAZV,2BAA4BhB,EAAlC,OADgBC,EAAI,SAAYA,EAAS,KAazB,eACVgB,EAAaC,IAAAA,gBAAsBd,EAAc,wBAajDe,EAAU,sHAAmFH,GANjF,mEACkBD,EADlB,8DANkB,SAAdZ,EAAuB,GAAvB,sJAGcc,EAHd,0DAMJ,qBAMF,iBAEhBN,EAAIS,OACJT,EAAIU,QAAQF,GACZR,EAAIW,UAG+B,CAACnB,IAGpC,0BACEoB,MAAOjB,EACPkB,IAAKjB,EACLkB,MAAM,OACNC,YAAa,EACb1B,GAAIM","sources":["webpack://example/../gatsby-theme-academic/src/components/Gist/index.jsx"],"sourcesContent":["import React from 'react';\nimport {useSiteMetadata, useTheme} from '@/utils/hooks';\nimport Utils from '@/utils/pageUtils';\n\n\nconst Gist = (props) => {\n  const { id, file } = props;\n  const [themeMode, setThemeMode] = useTheme();\n  const siteMetadata = useSiteMetadata();\n\n  const uniqueId = file ? `gist-${id}-${file}` : `gist-${id}`;\n  const iframeNode = React.useRef(null);\n\n  const defineUrl = () => {\n    const fileArg = file ? `?file=${file}` : '';\n    return `https://gist.github.com/${id}.js${fileArg}`;\n  };\n\n  const updateIframeContent = () => {\n    const iframe = iframeNode.current;\n\n    let doc = iframe.document;\n    if (iframe.contentDocument) doc = iframe.contentDocument;\n    else if (iframe.contentWindow) doc = iframe.contentWindow.document;\n    const elementId = file ? `gist-${id}-${file}` : `gist-${id}`;\n\n    const gistLink = defineUrl();\n    const gistScript = `<script type=\"text/javascript\" src=\"${gistLink}\"></script>`;\n    const darkCssUrl = Utils.generateFullUrl(siteMetadata, 'github-gist-dark.css');\n    const darkCssScript = themeMode !== 'dark' ? '' : `\n      var styleNode = document.createElement(\"link\");\n      styleNode.setAttribute(\"rel\", \"stylesheet\");\n      styleNode.setAttribute(\"href\", \"${darkCssUrl}\");\n      document.body.appendChild(styleNode);\n    `;\n    const onloadScript = `<script>function init(){\n      parent.document.getElementById('${elementId}').style.height=document.body.scrollHeight + 'px';\n      ${darkCssScript}\n    }</script>`;\n    const headStyles = '<style>*{font-size:12px;} body{margin: 0;} </style>';\n    const resizeScript = 'onload=\"init()\"';\n    const iframeHtml = `<html><head><base target=\"_parent\">${headStyles}</head><body ${resizeScript}>${gistScript}${onloadScript}</body></html>`;\n\n    doc.open();\n    doc.writeln(iframeHtml);\n    doc.close();\n  };\n\n  React.useEffect(updateIframeContent, [themeMode]);\n\n  return (\n    <iframe\n      title={uniqueId}\n      ref={iframeNode}\n      width=\"100%\"\n      frameBorder={0}\n      id={uniqueId}\n    />\n  );\n};\n\nexport default Gist;\n"],"names":["props","id","file","useTheme","themeMode","siteMetadata","useSiteMetadata","uniqueId","iframeNode","React","iframe","current","doc","document","contentDocument","contentWindow","elementId","gistScript","darkCssUrl","Utils","iframeHtml","open","writeln","close","title","ref","width","frameBorder"],"sourceRoot":""}